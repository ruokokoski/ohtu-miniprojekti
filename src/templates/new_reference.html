{% extends "layout.html" %}

{% block title %}
New reference
{% endblock %}

{% block body %}
<script>document.getElementById("nav_new_reference").classList.toggle("active")</script>

<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-4 align-self-center">
            <h2>Create new reference</h2>
            <form action="/create_reference" id="new_reference" method="post" style="display: inline-block;">
                <!-- REQUIRED -->

                <!-- <label for="reference_type" style="display: inline-block; width: 200px;">Valitse viitteen tyyppi:</label> -->
                <div id="required_fields">
                    <b>Authors:</b>
                    <ul id="author_list">
                        <!-- Authors will be added here dynamically -->
                    </ul>
                    <div class="form-group">
                        <div class="row">
                            <input type="hidden" id="author" name="author">
                            <div class="col">
                                <input type="text" class="form-control" id="first_name" placeholder="Firstnames">
                            </div>
                            <div class="col">
                                <input type="text" class="form-control" id="last_name" placeholder="Lastname">
                            </div>
                            <button type="button" class="btn btn-primary" id="add_author_button">Add author</button>
                        </div>  
                    </div>
                    
                    <div class="form-group">
                        <label for="entry_type"><b>Type:</b></label>
                        <select name="entry_type" id="entry_type">
                            <option value="book" selected> book
                            <option value="article"> article
                            <option value="booklet"> booklet
                            <option value="conference"> conference
                            <option value="inbook"> inbook
                            <option value="incollection"> incollection
                            <option value="inproceedings"> inproceedings
                            <option value="manual"> manual
                            <option value="mastersthesis"> mastersthesis
                            <option value="misc"> misc
                            <option value="phdthesis"> phdthesis
                            <option value="proceedings"> proceedings
                            <option value="proceedingstechreport"> proceedingstechreport
                            <option value="unpublished"> unpublished
                            </select>
                    </div>
                </div>
                
                <!-- Fields -->
                
                <div id="optional_fields" style="display: block">
                    <div id="article_fields" style="display: none">
                        <div class="form-group">
                            <label for="journal"><b>Journal:</b></label>
                            <input type="text" class="form-control" name="journal" placeholder="Required">
                        </div>
                        <div class="form-group">
                            <label for="number"><b>Number:</b></label>
                            <input type="text" class="form-control" name="number" placeholder="Optional">
                        </div>
                        <div class="form-group">
                            <label for="volume"><b>Volume: </b></label>
                            <input type="text" class="form-control" name="volume" placeholder="Optional">
                        </div>
                        <div class="form-group">
                            <label for="month"><b>Month:</b></label>
                            <input type="text" class="form-control" name="month" placeholder="Optional">
                        </div>
                        <div class="form-group">
                            <label for="note"><b>Note:</b></label>
                            <input type="text" class="form-control" name="note" placeholder="Optional">
                        </div>
                    </div>           

                    <div id="book_fields" style="display: block">
                        <div class="form-group">
                            <label for="title"><b>Title:</b></label>
                            <input type="text" class="form-control" name="title" placeholder="Required" required>
                        </div>      
                        <div class="form-group">
                            <label for="year"><b>Year:</b></label>
                            <input type="number" class="form-control" style="width: 150px;" id="year" name="year" placeholder="Required" required min="1000">
                        </div>
                        <div class="form-group">
                            <label for="publisher"><b>Publisher:</b></label>
                            <input type="text" class="form-control" name="publisher" placeholder="Required">
                        </div>
                        <div class="form-group">
                            <label for="address"><b>Address:</b></label>
                            <input type="text" class="form-control" name="address" placeholder="Optional">
                        </div>
                        <div class="form-group">
                            <label for="volume"><b>Volume/Number:</b></label>
                            <input type="text" class="form-control" name="volume" placeholder="Optional">
                        </div>
                        <div class="form-group">
                            <label for="series"><b>Series:</b></label>
                            <input type="text" class="form-control" name="series" placeholder="Optional">
                        </div>
                        <div class="form-group">
                            <label for="edition"><b>Edition:</b></label>
                            <input type="text" class="form-control" name="edition" placeholder="Optional">
                        </div>
                        <div>
                            <label for="month"><b>Month:</b></label>
                            <input type="text" class="form-control" name="month" placeholder="Optional">
                        </div>
                        <div class="form-group">
                            <label for="note"><b>Note:</b></label>
                            <input type="text" class="form-control" name="note" placeholder="Optional">
                        </div>
                        <div class="form-group">
                            <label for="url"><b>URL:</b></label>
                            <input type="text" class="form-control" name="url" placeholder="Optional">
                        </div>
                        <div>
                            <label for="isbn"><b>ISBN:</b></label>
                            <input type="text" class="form-control" name="isbn" placeholder="Optional">
                        </div>
                    </div>

                    <div id="booklet_fields" style="display: block">
                        <div class="form-group">
                            <label for="title"><b>Title:</b></label>
                            <input type="text" class="form-control" name="title" placeholder="required" required>
                        </div>      
                        <div class="form-group">
                            <label for="author"><b>Author:</b></label>
                            <input type="number" class="form-control" style="width: 150px;" id="author" name="author" placeholder="required" required min="1000">
                        </div>
                        <div class="form-group">
                            <label for="howpublished"><b>Howpublished:</b></label>
                            <input type="text" class="form-control" name="howpublished" placeholder="required">
                        </div>
                        <div class="form-group">
                            <label for="address"><b>Address:</b></label>
                            <input type="text" class="form-control" name="address" placeholder="required">
                        </div>
                        <div class="form-group">
                            <label for="year"><b>Year:</b></label>
                            <input type="text" class="form-control" name="year" placeholder="required">
                        </div>
                    
                        <div class="form-group">
                            <label for="editor"><b>Editor:</b></label>
                            <input type="text" class="form-control" name="editor" placeholder="optional">
                        </div>
                        <div class="form-group">
                            <label for="volume"><b>Volume:</b></label>
                            <input type="text" class="form-control" name="volume" placeholder="optional">
                        </div>
                        <div class="form-group">
                            <label for="number"><b>Number:</b></label>
                            <input type="text" class="form-control" name="number" placeholder="optional">
                        </div>
                        <div class="form-group">
                            <label for="series"><b>Series:</b></label>
                            <input type="text" class="form-control" name="series" placeholder="optional">
                        </div>
                        <div class="form-group">
                            <label for="organisation"><b>Organisation:</b></label>
                            <input type="text" class="form-control" name="organisation" placeholder="optional">
                        </div>
                        <div class="form-group">
                            <label for="month"><b>Month:</b></label>
                            <input type="text" class="form-control" name="month" placeholder="optional">
                        </div>
                        <div class="form-group">
                            <label for="note"><b>Note:</b></label>
                            <input type="text" class="form-control" name="note" placeholder="optional">
                        </div>
                    </div>
                <div>
                    <!-- <button type="button" class="btn btn-primary" id="toggle_optionals_button">Optional fields</button> -->
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>
<script>setCurrentYearAsMax("year")</script>
<script>createReferenceFormButtons()</script>
{% endblock %}